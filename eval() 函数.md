eval() 函数

概念：将字符串str当成有效的表达式来求值并返回计算结果。 

语法：

> eval(expression[, globals[, locals]])

参数

> expression -- 表达式。
>
> globals -- 可选，变量作用域，全局命名空间，如果被提供，则必须是一个字典对象。
>
> locals -- 可选，变量作用域，局部命名空间，如果被提供，可以是任何映射对象。

返回值：返回表达式计算结果。 

```
>>>x = 7
>>> eval( '3 * x' )
21
>>> eval('pow(2,2)')
4
>>> eval('2 + 2')
4
>>> n=81
>>> eval("n + 4")
85
```

```
可以把list,tuple,dict和string相互转化。
 #################################################
 字符串转换成列表
 >>>a = "[[1,2], [3,4], [5,6], [7,8], [9,0]]"
 >>>type(a)
 <type 'str'>
 >>> b = eval(a)
 >>> print b
 [[1, 2], [3, 4], [5, 6], [7, 8], [9, 0]]
 >>> type(b)
<type 'list'>
#################################################
字符串转换成字典
>>> a = "{1: 'a', 2: 'b'}"
>>> type(a)
<type 'str'>
>>> b = eval(a)
>>> print b
{1: 'a', 2: 'b'}
>>> type(b)
<type 'dict'>
################################################
字符串转换成元组
>>> a = "([1,2], [3,4], [5,6], [7,8], (9,0))"
>>> type(a)
<type 'str'>
>>> b = eval(a)
>>> print b
([1, 2], [3, 4], [5, 6], [7, 8], (9, 0))
>>> type(b)
<type 'tuple'>
```

******************************************************************************************************

如果用户恶意输入，例如：

```
__import__('os').system('dir')
```

那么eval()之后，你会发现，当前目录文件都会展现在用户前面。

怎么避免安全问题

> ast.literal_eval（*node_or_string* ）

安全地评估表达式节点或包含Python文字或容器显示的字符串。提供的字符串或节点可能只包含以下Python文字结构：字符串，字节，数字，元组，列表，字符串，集合，布尔值和`None`。

这可用于安全地评估包含来自不受信任来源的Python值的字符串，而无需自己解析值。它无法评估任意复杂的表达式，例如涉及运算符或索引